<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Piece.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">XXLChess</a> &gt; <a href="index.source.html" class="el_package">XXLChess</a> &gt; <span class="el_source">Piece.java</span></div><h1>Piece.java</h1><pre class="source lang-java linenums">package XXLChess;

import processing.core.PImage;

import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;

public abstract class Piece implements Cloneable {
<span class="fc" id="L10">    public static HashMap&lt;String, PImage&gt; imageSources = new HashMap&lt;&gt;(); // A map that stores the images of the pieces</span>
    public final char type; // The type of the piece
    protected Set&lt;Tile&gt; possibleTargets; // The set of possible moves for the piece
    // Fields
    private final String pieceName; // The name of the piece
    private Tile currentTile; // The current tile where the piece is located
    private final Color color; // The color of the piece
    private final Double value; // The value of the piece
    private final String imageFileName; // The file name of the image that represents the piece
    private boolean hasMovedBefore; // Indicates if the piece has moved before

    // Constructor for the Piece class
<span class="fc" id="L22">    public Piece(String pieceName, Color color, Double value, char type) {</span>
<span class="fc" id="L23">        this.color = color;</span>
<span class="fc" id="L24">        this.pieceName = pieceName;</span>
<span class="fc" id="L25">        this.value = value;</span>
<span class="fc bfc" id="L26" title="All 2 branches covered.">        this.imageFileName = (color == Color.BLACK ? &quot;b&quot; : &quot;w&quot;) + &quot;-&quot; + pieceName + &quot;.png&quot;;</span>
<span class="fc" id="L27">        this.type = type;</span>
<span class="fc" id="L28">    }</span>

    /**
     * Creates a new piece based on the provided character. The character represents
     * the type of the piece and its color. Uppercase characters represent black pieces
     * and lowercase characters represent white pieces.
     *
     * @param c the character that represents the piece
     * @return the new piece
     */
    public static Piece createPiece(char c) {
        // Determine the color of the piece based on the case of the character
<span class="fc bfc" id="L40" title="All 2 branches covered.">        Color pieceColor = Character.isUpperCase(c) ? Color.BLACK : Color.WHITE;</span>
        // Convert the character to lowercase to match the switch cases
<span class="fc" id="L42">        c = Character.toLowerCase(c);</span>
<span class="fc bfc" id="L43" title="All 12 branches covered.">        switch (c) {</span>
            case 'p':
<span class="fc" id="L45">                return new Pawn(pieceColor);</span>
            case 'r':
<span class="fc" id="L47">                return new Rook(pieceColor);</span>
            case 'n':
<span class="fc" id="L49">                return new Knight(pieceColor);</span>
            case 'b':
<span class="fc" id="L51">                return new Bishop(pieceColor);</span>
            case 'h':
<span class="fc" id="L53">                return new Archbishop(pieceColor);</span>
            case 'c':
<span class="fc" id="L55">                return new Camel(pieceColor);</span>
            case 'g':
<span class="fc" id="L57">                return new General(pieceColor);</span>
            case 'a':
<span class="fc" id="L59">                return new Amazon(pieceColor);</span>
            case 'k':
<span class="fc" id="L61">                return new King(pieceColor);</span>
            case 'e':
<span class="fc" id="L63">                return new Chancellor(pieceColor);</span>
            case 'q':
<span class="fc" id="L65">                return new Queen(pieceColor);</span>
            default:
                // If the character does not match any piece, return null
<span class="fc" id="L68">                return null;</span>
        }
    }

    /**
     * Gets the possible moves of the piece.
     *
     * @return the set of possible moves
     */
    public Set&lt;Tile&gt; getPossibleTargets() {
<span class="fc" id="L78">        return possibleTargets;</span>
    }

    /**
     * Gets if the piece has moved before.
     *
     * @return true if the piece has moved before, false otherwise
     */
    public boolean getHasMovedBefore() {
<span class="fc" id="L87">        return hasMovedBefore;</span>
    }

    // Sets the flag that indicates if the piece has moved before
    public void setHasMovedBefore(boolean isMoved) {
<span class="fc" id="L92">        this.hasMovedBefore = isMoved;</span>
<span class="fc" id="L93">    }</span>

    // Checks if the piece is captured
    public boolean isCaptured() {
<span class="nc bnc" id="L97" title="All 2 branches missed.">        return currentTile == null;</span>
    }

    // Gets the x-coordinate of the piece
    public int getX() throws IllegalArgumentException {
<span class="pc bpc" id="L102" title="1 of 2 branches missed.">        if (currentTile == null)</span>
<span class="nc" id="L103">            throw new IllegalArgumentException(&quot;This piece was already captured&quot;);</span>
<span class="fc" id="L104">        return currentTile.getX();</span>
    }

    // Gets the y-coordinate of the piece
    public int getY() throws IllegalArgumentException {
<span class="pc bpc" id="L109" title="1 of 2 branches missed.">        if (currentTile == null)</span>
<span class="nc" id="L110">            throw new IllegalArgumentException(&quot;This piece was already captured&quot;);</span>
<span class="fc" id="L111">        return currentTile.getY();</span>
    }

    // Abstract method for updating possible moves
    public abstract void updatePossibleTargets(Board board) throws IllegalArgumentException;

    // Getter methods
    public String getPieceName() {
<span class="nc" id="L119">        return pieceName;</span>
    }

    public Color getColor() {
<span class="fc" id="L123">        return color;</span>
    }

    public Double getValue() {
<span class="nc" id="L127">        return value;</span>
    }

    public Tile getCurrentTile() {
<span class="fc" id="L131">        return currentTile;</span>
    }

    public void setCurrentTile(Tile currentTile) {
<span class="fc" id="L135">        this.currentTile = currentTile;</span>
<span class="fc" id="L136">    }</span>

    public String getImageFileName() {
<span class="nc" id="L139">        return imageFileName;</span>
    }

    public int getLeft() throws IllegalArgumentException {
<span class="pc bpc" id="L143" title="1 of 2 branches missed.">        if (currentTile == null)</span>
<span class="nc" id="L144">            throw new IllegalArgumentException(&quot;This piece was already captured&quot;);</span>
<span class="fc" id="L145">        return currentTile.getLeft();</span>
    }

    public int getTop() throws IllegalArgumentException {
<span class="pc bpc" id="L149" title="1 of 2 branches missed.">        if (currentTile == null)</span>
<span class="nc" id="L150">            throw new IllegalArgumentException(&quot;This piece was already captured&quot;);</span>
<span class="fc" id="L151">        return currentTile.getTop();</span>
    }

    /**
     * Gets the image of the piece.
     *
     * @return the image of the piece
     */
    public PImage getImage() {
<span class="nc" id="L160">        return Piece.imageSources.get(imageFileName);</span>
    }

    // Enum for the color of the piece
<span class="fc" id="L164">    public enum Color {</span>
<span class="fc" id="L165">        BLACK,</span>
<span class="fc" id="L166">        WHITE</span>
    }
}

class Amazon extends Piece {
    /**
     * Constructs an Amazon piece with the given color.
     *
     * @param color the color of the piece
     */
    public Amazon(Color color) {
<span class="fc" id="L177">        super(&quot;amazon&quot;, color, 12.0, 'a');</span>
<span class="fc" id="L178">    }</span>

    /**
     * Updates the possible moves for this piece on a given board.
     * The Amazon piece can move like a Knight, Bishop, or Rook.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L189">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L190">        tiles.addAll(Knight.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L191">        tiles.addAll(Bishop.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L192">        tiles.addAll(Rook.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L193">        possibleTargets = tiles;</span>
<span class="fc" id="L194">    }</span>
}

class Archbishop extends Piece {
    /**
     * Constructs an Archbishop piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Archbishop(Color pieceColor) {
<span class="fc" id="L204">        super(&quot;archbishop&quot;, pieceColor, 7.5, 'h');</span>
<span class="fc" id="L205">    }</span>

    /**
     * Updates the possible moves for this piece on a given board.
     * The Archbishop piece can move like a Bishop or Knight.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L216">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L217">        tiles.addAll(Bishop.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L218">        tiles.addAll(Knight.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L219">        possibleTargets = tiles;</span>
<span class="fc" id="L220">    }</span>
}

class Bishop extends Piece {
    /**
     * Constructs a Bishop piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Bishop(Color pieceColor) {
<span class="fc" id="L230">        super(&quot;bishop&quot;, pieceColor, 3.625, 'b');</span>
<span class="fc" id="L231">    }</span>

    /**
     * Gets the possible moves for a Bishop piece from a given tile on a board.
     *
     * @param board  the current game board
     * @param source the tile from which to calculate the possible moves
     * @return the set of possible tiles the Bishop can move to
     * @throws IllegalArgumentException if the source tile is null
     */
    protected static Set&lt;Tile&gt; getPossibleTargetsFromTile(Board board, Tile source) throws IllegalArgumentException {
<span class="fc" id="L242">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L243">        tiles.addAll(board.linearMove(source, 1, 1));</span>
<span class="fc" id="L244">        tiles.addAll(board.linearMove(source, 1, -1));</span>
<span class="fc" id="L245">        tiles.addAll(board.linearMove(source, -1, -1));</span>
<span class="fc" id="L246">        tiles.addAll(board.linearMove(source, -1, 1));</span>
<span class="fc" id="L247">        return tiles;</span>
    }

    /**
     * Updates the possible moves for this piece on a given board.
     * The Bishop piece can move diagonally.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="pc bpc" id="L259" title="1 of 2 branches missed.">        if (getCurrentTile() == null)</span>
<span class="nc" id="L260">            throw new IllegalArgumentException();</span>
<span class="fc" id="L261">        possibleTargets = getPossibleTargetsFromTile(board, getCurrentTile());</span>
<span class="fc" id="L262">    }</span>
}

class Camel extends Piece {
    /**
     * Constructs a Camel piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Camel(Color pieceColor) {
<span class="fc" id="L272">        super(&quot;camel&quot;, pieceColor, 2.0, 'c');</span>
<span class="fc" id="L273">    }</span>

    /**
     * Returns the movement directions for the Camel piece.
     *
     * @return an array of coordinate pairs representing the movement directions
     */
    protected static int[][] getMovementDirections() {
<span class="fc" id="L281">        return new int[][]{</span>
                {3, 1},
                {3, -1},
                {-3, 1},
                {-3, -1},
                {1, 3},
                {-1, 3},
                {1, -3},
                {-1, -3}
        };
    }

    /**
     * Updates the possible moves for this piece on a given board.
     * The Camel piece has a unique jumping move pattern.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L302">        possibleTargets = board.jumpingMove(getCurrentTile(), getMovementDirections());</span>
<span class="fc" id="L303">    }</span>
}

class Chancellor extends Piece {
    /**
     * Constructs a Chancellor piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Chancellor(Color pieceColor) {
<span class="fc" id="L313">        super(&quot;chancellor&quot;, pieceColor, 8.5, 'e');</span>
<span class="fc" id="L314">    }</span>

    /**
     * Updates the possible moves for this piece on a given board.
     * The Chancellor piece can move like a Knight or Rook.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L325">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L326">        tiles.addAll(Knight.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L327">        tiles.addAll(Rook.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L328">        possibleTargets = tiles;</span>
<span class="fc" id="L329">    }</span>
}

class General extends Piece {
    /**
     * Constructs a General piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public General(Color pieceColor) {
<span class="fc" id="L339">        super(&quot;knight-king&quot;, pieceColor, 5.0, 'g');</span>
<span class="fc" id="L340">    }</span>

    /**
     * Updates the possible moves for this piece on a given board.
     * The General piece can move like a Knight or King.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L351">        Set&lt;Tile&gt; tiles = board.jumpingMove(getCurrentTile(), Knight.getDirections());</span>
<span class="fc" id="L352">        tiles.addAll(board.jumpingMove(getCurrentTile(), King.getDirections()));</span>
<span class="fc" id="L353">        possibleTargets = tiles;</span>
<span class="fc" id="L354">    }</span>
}

class King extends Piece {
    
    /**
     * Constructs a King piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public King(Color pieceColor) {
<span class="fc" id="L365">        super(&quot;king&quot;, pieceColor, Double.POSITIVE_INFINITY, 'k');</span>
<span class="fc" id="L366">    }</span>

    /**
     * Returns the movement directions for the King piece.
     *
     * @return an array of coordinate pairs representing the movement directions
     */
    protected static int[][] getDirections() {
<span class="fc" id="L374">        return new int[][]{</span>
                {-1, -1},
                {-1, 1},
                {1, -1},
                {1, 1},
                {-1, 0},
                {1, 0},
                {0, -1},
                {0, 1}
        };
    }


    /**
     * Returns the possible moves for a King piece from a given source tile.
     *
     * @param board  the current game board
     * @param source the source tile
     * @return a set of possible destination tiles
     * @throws IllegalArgumentException if the source tile is null
     */
    protected static Set&lt;Tile&gt; getPossibleTargetsFromTile(Board board, Tile source) throws IllegalArgumentException {
<span class="fc" id="L396">        return board.jumpingMove(source, getDirections());</span>
    }

    /**
     * Updates the possible moves for this piece on a given board.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L407">        this.possibleTargets = getPossibleTargetsFromTile(board, getCurrentTile());</span>
<span class="fc" id="L408">    }</span>

    public Set&lt;Movement&gt; getPotentialCastlingMovements(Game ctx) {
<span class="fc" id="L411">        HashSet&lt;Movement&gt; possibleCastlingMovements = new HashSet&lt;&gt;();</span>
<span class="fc" id="L412">        Set&lt;Tile&gt; targets = ctx.getBoard().jumpingMove(getCurrentTile(), </span>
            new int[][] {
                {-2, 0},
                {2, 0}
            }
        );
        
<span class="fc bfc" id="L419" title="All 2 branches covered.">        for (Tile t : targets) {</span>
<span class="fc" id="L420">            Movement m = new Movement(this,t);</span>
<span class="fc bfc" id="L421" title="All 2 branches covered.">            if (ctx.getCastlingMovement(m) != null) {</span>
<span class="fc" id="L422">                possibleCastlingMovements.add(m);</span>
            }
<span class="fc" id="L424">        }</span>
<span class="fc" id="L425">        return possibleCastlingMovements;</span>
    }
}

class Knight extends Piece {
    /**
     * Constructs a Knight piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Knight(Color pieceColor) {
<span class="fc" id="L436">        super(&quot;knight&quot;, pieceColor, 2.0, 'n');</span>
<span class="fc" id="L437">    }</span>

    /**
     * Returns the movement directions for the Knight piece.
     *
     * @return an array of coordinate pairs representing the movement directions
     */
    public static int[][] getDirections() {
<span class="fc" id="L445">        return new int[][]{</span>
                {-1, -2},
                {1, -2},
                {-1, 2},
                {1, 2},
                {-2, -1},
                {2, -1},
                {-2, 1},
                {2, 1}
        };
    }

    /**
     * Returns the possible moves for a Knight piece from a given source tile.
     *
     * @param board  the current game board
     * @param source the source tile
     * @return a set of possible destination tiles
     * @throws IllegalArgumentException if the source tile is null
     */
    protected static Set&lt;Tile&gt; getPossibleTargetsFromTile(Board board, Tile source) throws IllegalArgumentException {
<span class="fc" id="L466">        return board.jumpingMove(source, getDirections());</span>
    }

    /**
     * Updates the possible moves for this piece on a given board.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L477">        possibleTargets = getPossibleTargetsFromTile(board, getCurrentTile());</span>
<span class="fc" id="L478">    }</span>
}

class Pawn extends Piece {
    /**
     * Constructs a Pawn piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Pawn(Color pieceColor) {
<span class="fc" id="L488">        super(&quot;pawn&quot;, pieceColor, 1.0, 'p');</span>
<span class="fc" id="L489">    }</span>

    /**
     * Returns the attack range for this Pawn on a given board.
     * The Pawn piece can attack diagonally.
     *
     * @param board the current game board
     * @return a set of possible destination tiles
     * @throws IllegalArgumentException if the current tile is null
     */
    public Set&lt;Tile&gt; getAttackRange(Board board) throws IllegalArgumentException {
        int[][] attackDirection;
<span class="fc" id="L501">        PlayerAgent agent = board.getAgentByColor(getColor());</span>
<span class="fc bfc" id="L502" title="All 2 branches covered.">        if (agent instanceof Bot) {</span>
<span class="fc" id="L503">            attackDirection = new int[][]{</span>
                    {-1, 1},
                    {1, 1}
            };
        } else {
<span class="fc" id="L508">            attackDirection = new int[][]{</span>
                    {1, -1},
                    {-1, -1}
            };
        }
<span class="fc" id="L513">        Set&lt;Tile&gt; diagonals = board.jumpingMove(getCurrentTile(), attackDirection);</span>
<span class="fc" id="L514">        Set&lt;Tile&gt; possibleTargets = new HashSet&lt;Tile&gt;();</span>
<span class="fc bfc" id="L515" title="All 2 branches covered.">        for (Tile tile : diagonals) {</span>
<span class="fc" id="L516">            Piece piece = tile.getCurrentPiece();</span>
<span class="fc bfc" id="L517" title="All 2 branches covered.">            if (piece != null</span>
<span class="pc bpc" id="L518" title="1 of 2 branches missed.">                    &amp;&amp; piece.getColor() != getColor()) {</span>
<span class="fc" id="L519">                possibleTargets.add(tile);</span>
            }
<span class="fc" id="L521">        }</span>
<span class="fc" id="L522">        return possibleTargets;</span>
    }

    /**
     * Updates the possible moves for this piece on a given board.
     * The Pawn piece can move forward one square or two squares from its initial position,
     * and can capture diagonally.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
        // Captures diagonally only.
<span class="fc" id="L536">        Set&lt;Tile&gt; possibleTargets = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L537">        possibleTargets.addAll(getAttackRange(board));</span>
        // For the purposes of pawn movement, “forward” is considered going up the board for the human player, and going down the board for the computer player
<span class="fc" id="L539">        PlayerAgent agent = board.getAgentByColor(getColor());</span>
<span class="fc bfc" id="L540" title="All 2 branches covered.">        int unitDirection = (agent instanceof Human ? -1 : 1);</span>
<span class="fc" id="L541">        Tile[] tiles = {board.getTile(getX(), getY() + unitDirection), null};</span>
        // A pawn can move two squares forward if it is located on 2nd row from the top or bottom of the board (rank 2 and rank 13), and has not moved before.
<span class="fc bfc" id="L543" title="All 6 branches covered.">        if (!getHasMovedBefore() &amp;&amp; (getY() == 1 || getY() == 12)) {</span>
<span class="fc" id="L544">            tiles[1] = board.getTile(getX(), getY() + unitDirection * 2);</span>
        }
<span class="fc bfc" id="L546" title="All 2 branches covered.">        for (Tile tile : tiles) {</span>
<span class="fc bfc" id="L547" title="All 4 branches covered.">            if (tile != null &amp;&amp; tile.getCurrentPiece() == null) {</span>
<span class="fc" id="L548">                possibleTargets.add(tile);</span>
            }
        }
<span class="fc" id="L551">        this.possibleTargets = possibleTargets;</span>
<span class="fc" id="L552">    }</span>
}

class Queen extends Piece {
    /**
     * Constructs a Queen piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Queen(Color pieceColor) {
<span class="fc" id="L562">        super(&quot;queen&quot;, pieceColor, 9.5, 'q');</span>
<span class="fc" id="L563">    }</span>

    /**
     * Updates the possible moves for this piece on a given board.
     * The Queen piece can move along its rank, file, or diagonal.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="fc" id="L574">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L575">        tiles.addAll(Bishop.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L576">        tiles.addAll(Rook.getPossibleTargetsFromTile(board, getCurrentTile()));</span>
<span class="fc" id="L577">        possibleTargets = tiles;</span>
<span class="fc" id="L578">    }</span>
}

class Rook extends Piece {
    /**
     * Constructs a Rook piece with the given color.
     *
     * @param pieceColor the color of the piece
     */
    public Rook(Color pieceColor) {
<span class="fc" id="L588">        super(&quot;rook&quot;, pieceColor, 5.25, 'r');</span>
<span class="fc" id="L589">    }</span>

    /**
     * Returns the possible moves for a Rook piece from a given source tile on a given board.
     *
     * @param board  the current game board
     * @param source the tile on which the Rook piece is currently located
     * @return a set of possible destination tiles
     * @throws IllegalArgumentException if the source tile is null
     */
    protected static Set&lt;Tile&gt; getPossibleTargetsFromTile(Board board, Tile source) throws IllegalArgumentException {
<span class="fc" id="L600">        Set&lt;Tile&gt; tiles = new HashSet&lt;Tile&gt;();</span>
<span class="fc" id="L601">        tiles.addAll(board.linearMove(source, 0, 1));</span>
<span class="fc" id="L602">        tiles.addAll(board.linearMove(source, 0, -1));</span>
<span class="fc" id="L603">        tiles.addAll(board.linearMove(source, 1, 0));</span>
<span class="fc" id="L604">        tiles.addAll(board.linearMove(source, -1, 0));</span>
<span class="fc" id="L605">        return tiles;</span>
    }

    /**
     * Updates the possible moves for this piece on a given board.
     * The Rook piece can move any number of squares along its rank or file.
     *
     * @param board the current game board
     * @throws IllegalArgumentException if the current tile is null
     */
    @Override
    public void updatePossibleTargets(Board board) throws IllegalArgumentException {
<span class="pc bpc" id="L617" title="1 of 2 branches missed.">        if (getCurrentTile() == null)</span>
<span class="nc" id="L618">            throw new IllegalArgumentException();</span>
<span class="fc" id="L619">        possibleTargets = getPossibleTargetsFromTile(board, getCurrentTile());</span>
<span class="fc" id="L620">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>