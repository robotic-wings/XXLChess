<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Bot.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">XXLChess</a> &gt; <a href="index.source.html" class="el_package">XXLChess</a> &gt; <span class="el_source">Bot.java</span></div><h1>Bot.java</h1><pre class="source lang-java linenums">package XXLChess;

import XXLChess.Piece.Color;

import java.util.HashSet;
import java.util.Set;

/**
 * This class represents a computer player (bot) in the chess game.
 * It extends the abstract PlayerAgent class and provides a method for making a decision on the next move.
 */
public class Bot extends PlayerAgent {
    private BotAIStrategy strategy;

    /**
     * Constructor for the Bot class.
     *
     * @param color         The color of the bot's pieces.
     * @param remainingTime The initial remaining time for the bot's turns.
     * @param timeIncrement The time increment after each move.
     */
    public Bot(Color color, int remainingTime, int timeIncrement) {
<span class="fc" id="L23">        super(color, remainingTime, timeIncrement);</span>
<span class="fc" id="L24">        strategy = new RandomSelectionStrategy();</span>
<span class="fc" id="L25">    }</span>

    /**
     * Make a decision on the next move.
     * The strategy is to choose a random move from the set of legal moves that do not lead to a threat against the king.
     * If no such moves exist, return null.
     *
     * @param ctx The current game context.
     * @return The selected move, or null if no safe moves are possible.
     */
    public Movement makeDecision(Game ctx) {
<span class="fc" id="L36">        Set&lt;Movement&gt; moves = ctx.getAllLegalMovements(this);  // Get all legal moves</span>
<span class="fc" id="L37">        Set&lt;Movement&gt; notBadMoves = new HashSet&lt;&gt;();  // Store moves that don't lead to a threat against the king</span>

        // Iterate through all moves
<span class="fc bfc" id="L40" title="All 2 branches covered.">        for (Movement m : moves) {</span>
            // If the move doesn't lead to a threat against the king, add it to notBadMoves
<span class="fc bfc" id="L42" title="All 2 branches covered.">            if (ctx.predictThreats(getOpponent(), m, getKing()).size() == 0) {</span>
<span class="fc" id="L43">                notBadMoves.add(m);</span>
            }
<span class="fc" id="L45">        }</span>
<span class="fc" id="L46">        return strategy.choose(notBadMoves);</span>
    }

    public BotAIStrategy getStrategy() {
<span class="nc" id="L50">        return strategy;</span>
    }

    public void setStrategy(BotAIStrategy strategy) {
<span class="fc" id="L54">        this.strategy = strategy;</span>
<span class="fc" id="L55">    }</span>

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>